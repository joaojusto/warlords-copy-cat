(this.webpackJsonpwarlords_copy_cat=this.webpackJsonpwarlords_copy_cat||[]).push([[0],{1488:function(e,t,n){"use strict";n.r(t);var a,r=n(122),o=n.n(r),i=n(556),c=n.n(i),s=(n(564),n(565),n(270)),l=n(63),u=n.n(l),d=n(557),m=n.n(d),h=n(28),p=n(558),f=n(44),y={scene:{create:function(){var e=this,t=this.make.tilemap({tileWidth:128,tileHeight:128}),n=t.tileWidth,r=t.tileHeight,o=t.addTilesetImage("tilemap","tiles",n,r,1,2);console.log("here",n,r);var i,c=t.createBlankDynamicLayer("terrain",o,0,0,100,100,n,r),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random(),a=new p.Noise;a.seed(n);var r=12*e/100,o=0,i=0,c=0,s=0,l=Object(h.range)(t).map((function(t){return Object(h.range)(e).map((function(e){var n=a.perlin2(e/r,t/r);return o=n<o?n:o,i=n>i?n:i,n<0?c++:s++,n}))})),u=.45,d=u+.1,m=function(e){return e>=u&&e<d},y=function(e){return e<u},g=function(e){return!m(e)&&!y(e)},v=function(e,t,n){if(n-1<0||n+1>=e.length)return Object(h.sample)(S);if(t-1<0||t+1>=e.length)return Object(h.sample)(S);var a=Object(f.a)(o,i,e[n-1][t-1]),r=Object(f.a)(o,i,e[n-1][t]),c=Object(f.a)(o,i,e[n-1][t+1]),s=Object(f.a)(o,i,e[n][t-1]),l=Object(f.a)(o,i,e[n][t+1]),d=Object(f.a)(o,i,e[n+1][t-1]),m=Object(f.a)(o,i,e[n+1][t]),p=Object(f.a)(o,i,e[n+1][t+1]);return g(r)||g(s)||g(l)||g(m)?g(m)&&g(l)?C[7]:g(r)&&g(l)?C[2]:g(m)&&g(s)?C[5]:g(r)&&g(s)?C[0]:g(r)?C[1]:g(m)?C[6]:g(l)?C[3]:g(s)?C[4]:a<u&&r<u&&c<u?C[6]:d<u&&m<u&&p<u?C[1]:void 0:Object(h.sample)(S)},b=function(e){return function(t,n,a){var r=Object(f.a)(o,i,t);return y(r)?Object(h.sample)(S):m(r)?v(e,n,a):r>=.7&&r<.8?Object(h.sample)(x):r>=.8?Object(h.sample)(T):Object(h.sample)(j)}},w=b(l),O=l.map((function(e,t){return e.map((function(e,n){return w(e,n,t)}))}));return console.log("Min: ".concat(o,", Max: ").concat(i)),console.log("<0: ".concat(c,", >0: ").concat(s)),console.log("Seed: ".concat(n)),O}(100,100),d=new m.a.js;d.setGrid(l),d.setAcceptableTiles([].concat(j,T,x));var k=[],K=function(e,t,n,a){d.setTileCost(e,a),k[n]=k[n]||[],k[n][t]=a};l.forEach((function(e,t){return e.forEach((function(e,n){i||Object(h.includes)(S,e)||(i={x:n,y:t}),c.putTileAt(e,n,t),Object(h.includes)(j,e)&&K(e,n,t,1),Object(h.includes)(x,e)&&K(e,n,t,2),Object(h.includes)(T,e)&&K(e,n,t,3)}))}));var M=c=t.convertLayerToStatic(c),A=M.width,E=M.height;this.cameras.add(y.width-g-b,b,g,v).setZoom((v-2)/E).setName(O).setBackgroundColor(w).centerOn(A/2,E/2);var I=this.physics.add.sprite(i.x*n,i.y*r,"warrior").setDisplaySize(24,24).setDisplayOrigin(-42,-44);this.cameras.main.setBounds(0,0,A,E),this.cameras.main.setScroll(-this.cameras.main.width/2+A/2,-this.cameras.main.height/2+E/2),this.cameras.main.centerOn(I.x,I.y);var B,z=this.add.graphics(),G={movementPoints:4},P=function(t){z.destroy(),z=e.add.graphics()},W=function(t){if(t){if(console.log(B&&B.path,t),B&&Object(h.isEqual)(B.path,t))return console.log("here"),function(t){var a=t.currentTurn.map((function(e){var t=e.x,a=e.y;return{targets:I,x:{value:t*n,duration:200},y:{value:a*r,duration:200}}}));e.cameras.main.startFollow(I),e.tweens.timeline({tweens:a,onComplete:function(){e.cameras.main.stopFollow(I),P(t)}}),G.movementPoints-=t.currentCost}(B);B&&P(B);var a={path:t,currentCost:0,totalCost:0,currentTurn:[],nextTurns:[],indicators:[],nextIndicators:[]},o=t.slice(1,t.length).reduce((function(e,n){var a=n.x,r=n.y,o=k[r][a],i=e.totalCost+o,c=Object(s.a)(e.currentTurn),l=Object(s.a)(e.nextTurns),u=e.currentCost;return i<=G.movementPoints?(c.push({x:a,y:r}),u=i):l.push({x:a,y:r}),{path:t,currentCost:u,totalCost:i,currentTurn:c,nextTurns:l}}),a);z.fillStyle(16777215,1),o.indicators=o.currentTurn.map((function(e){var t=e.x,a=e.y,o=new u.a.Geom.Circle(t*n+n/2,a*r+r/2,8);return z.fillCircleShape(o),o})),z.fillStyle(16711680,1),o.nextIndicators=o.nextTurns.map((function(e){var t=e.x,a=e.y,o=new u.a.Geom.Circle(t*n+n/2,a*r+r/2,8);return z.fillCircleShape(o),o})),console.log("here",o),B=o}};this.input.on("pointerdown",(function(e){var t=e.worldX,a=e.worldY,o=Math.floor(t/n),i=Math.floor(a/r),c=Math.floor(I.x/n),s=Math.floor(I.y/r);try{d.findPath(c,s,o,i,W),d.calculate()}catch(l){console.error("Ups! Out of scope :S")}}));var _=this.input.keyboard.createCursorKeys(),D={camera:this.cameras.main,left:_.left,right:_.right,up:_.up,down:_.down,zoomIn:this.input.keyboard.addKey(u.a.Input.Keyboard.KeyCodes.Q),zoomOut:this.input.keyboard.addKey(u.a.Input.Keyboard.KeyCodes.E),acceleration:2.8,drag:.6,maxSpeed:200};a=new u.a.Cameras.Controls.SmoothedKeyControl(D)},update:function(e,t){a.update(t),this.cameras.main.setZoom(u.a.Math.Clamp(this.cameras.main.zoom,.08,1))},preload:function(){this.load.setBaseURL("".concat("/warlords-copy-cat")),this.load.image("tiles","tilesets/tileset-extruded.png"),this.load.image("warrior","warrior.png")}},physics:{default:"arcade",arcade:{gravity:{y:0}}},type:u.a.AUTO,width:800,height:600,parent:"App",pixelArt:!0},g=102,v=102,b=10,w=8772,O="minimap",j=[2],x=[4,5,6],C=[8,9,10,11,12,13,14,15],T=[1],S=[3,7];new l.Game(y);var k=function(){return o.a.createElement("div",{className:"App",id:"App"})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},559:function(e,t,n){e.exports=n(1488)},564:function(e,t,n){},565:function(e,t,n){}},[[559,1,2]]]);
//# sourceMappingURL=main.a19b66f7.chunk.js.map